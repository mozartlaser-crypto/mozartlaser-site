<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Create a Product - Mozart Laser</title>
<meta name="description" content="High-quality custom laser engravings by Mozart Laser. Personal, professional, and precision-crafted designs." />
<link rel="stylesheet" href="css/navbar.css">
<link rel="stylesheet" href="css/footer.css">
<link rel="stylesheet" href="css/cart.css">
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;700&display=swap" rel="stylesheet">

<style>
/* (kept your styles exactly as provided) */
.custom-select {
  position: relative;
  font-family: Arial;
  user-select: none;
  width: 100%;
}

.select-selected {
  background-color: #eee;
  padding: 8px 12px;
  border: 1px solid #ccc;
  cursor: pointer;
  color: #333;
  text-align: left;
  position: relative;
}

.select-selected.placeholder {
  color: #aaa;
}

.select-selected::after {
  content: "\25BC";
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.6em;
  pointer-events: none;
}

.select-selected.select-arrow-active::after {
  transform: translateY(-50%) rotate(180deg);
}

.select-items {
  position: absolute;
  background-color: #fff;
  border: 1px solid #ccc;
  border-top: none;
  z-index: 99;
  width: 100%;
  max-height: 200px;
  overflow-y: auto;
}

.select-items div {
  padding: 8px 12px;
  cursor: pointer;
  text-align: left;
}

.select-items div:hover {
  background-color: #f1f1f1;
}

.select-hide { display: none; }
.select-selected { border-radius: 6px; }
.select-items { border-radius: 0 0 6px 6px; }

select.input-field {
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
  background-color: #fafafa !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23333' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: right 12px center !important;
  background-size: 16px !important;
  padding-right: 44px !important;
  cursor: pointer !important;
}
select.input-field::-ms-expand { display: none !important; }

html, body { margin:0; padding:0; height:100%; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background-color: #f7f7f7; }
.builder-container { max-width: 850px; margin: 120px auto; background:#fff; border-radius:16px; box-shadow:0 6px 24px rgba(0,0,0,0.1); padding:40px 60px; text-align:center; transition: all 0.4s ease; }
.step { display: none; }
.step.active { display: block; animation: fadeIn 0.45s ease; }
@keyframes fadeIn { from {opacity:0; transform:translateY(15px);} to {opacity:1; transform:translateY(0);} }

h2 { font-weight: 300; font-size:2rem; margin-bottom:10px; }
p.step-desc { color:#666; font-size:1rem; margin-bottom:25px; }

select, input[type="text"], input[type="file"], textarea {
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-top:8px;
  margin-bottom:20px;
  font-size:1rem;
  transition:0.18s;
}
select:focus, input:focus, textarea:focus { border-color:#111; outline:none; }

button.next-step, button.prev-step, button#add-to-cart, button#add-to-cart-custom {
  background-color:#111; color:#fff; border:none; border-radius:8px; padding:12px 25px; margin:10px; cursor:pointer; font-size:1rem;
}
button.next-step:hover, button.prev-step:hover, button#add-to-cart:hover, button#add-to-cart-custom:hover { background-color:#333; }

#total-price { font-size:1.3rem; font-weight:500; margin-top:15px; text-align:right; }

@media (max-width:600px) { .builder-container { padding:30px 20px; } }

.input-field { width:100%; padding:12px; margin-bottom:16px; border:1px solid #ccc; border-radius:8px; background-color:#fafafa; font-size:1rem; color:#333; transition:border-color 0.18s ease, box-shadow 0.18s ease; appearance:none; }
.input-field:focus { outline:none; border-color:#5c6bc0; box-shadow:0 0 0 3px rgba(92,107,192,0.12); }

.error { border-color: #d9534f !important; box-shadow: 0 0 0 4px rgba(217,83,79,0.06) !important; }

.row { display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap; }
.option-card {
  border: 1px solid #eee; border-radius:10px; padding:14px; width:100%; max-width:380px; cursor:pointer;
  transition: box-shadow 0.18s, transform 0.12s; text-align:left;
}
.option-card:hover { box-shadow: 0 8px 24px rgba(0,0,0,0.06); transform: translateY(-4px); }
.option-radio { margin-right:12px; transform: scale(1.15); }
.option-title { font-weight:600; margin-bottom:6px; }
.option-desc { color:#666; font-size:0.95rem; }

textarea.input-field { min-height:90px; resize:vertical; }
#summary, #summary_custom { min-height: 120px; }

.select-existing-container {
  margin-top: 18px;
  text-align: center;
  max-width: 480px;
  margin-left: auto;
  margin-right: auto;
}
.select-existing-container label {
  display: block;
  font-weight: 500;
  margin-bottom: 6px;
}

@media (max-width: 650px) {
  .step1-options { flex-direction: column; align-items: center; }
  .step1-options .option-card { max-width: 100%; }
}
</style>
</head>
<body>

<!-- HEADER -->
<header class="site-header" id="siteHeader">
  <div class="header-inner">
    <a href="index.html">
      <img src="images/mozartlaserlogo.png" alt="MozartLaser" class="logo">
    </a>
    <nav class="main-nav">
      <ul>
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="create.html">Create</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
    <div class="hamburger"><span></span><span></span><span></span></div>
  </div>
  <div class="cart-icon" id="cart-icon">
    <img src="images/cart-icon.png" alt="Cart">
    <span id="cart-count">0</span>
  </div>
</header>

<!-- CART PANEL -->
<div class="cart-panel" id="cart-panel">
  <h3>Shopping Cart</h3>
  <ul id="cart-items"></ul>
  <p>Total: $<span id="cart-total">0.00</span></p>
  <button id="checkout">Checkout</button>
  <button id="close-cart">Close</button>
</div>

<!-- BUILDER -->
<main>
  <div class="builder-container">

    <!-- STEP 1: CHOOSE FLOW -->
    <div class="step active" id="step1">
      <h2>Step 1: Choose What You Want to Do</h2>
      <p class="step-desc">Pick an option. "Customize a Product" lets you choose an existing product and request changes. "Create your own" starts the fully-custom flow.</p>

      <div class="row step1-options">
        <label class="option-card" id="opt-customize" title="Pick this to modify an existing product">
          <div style="display:flex; align-items:center;">
            <input type="radio" name="create-mode" value="customize" class="option-radio" id="mode-customize" checked>
            <div>
              <div class="option-title">Customize one of our products</div>
              <div class="option-desc">Select a product and tell us the changes you want.</div>
            </div>
          </div>
        </label>

        <label class="option-card" id="opt-full" title="Pick this to make a fully custom product">
          <div style="display:flex; align-items:center;">
            <input type="radio" name="create-mode" value="full" class="option-radio" id="mode-full">
            <div>
              <div class="option-title">Create your own (fully custom)</div>
              <div class="option-desc">Start from scratch — choose product type, shape, text, and upload a design.</div>
            </div>
          </div>
        </label>
      </div>

      <div class="select-existing-container">
        <label id="select-existing-label" for="select-existing">If customizing, pick a product:</label>
        <select id="select-existing" class="input-field">
          <option value="">-- Select a product to customize --</option>
          <option value="Cross with Scripture">Cross with Scripture — Plaque</option>
          <option value="Train Plaque">Train Plaque — Plaque</option>
          <option value="Leather Wallet">Leather Wallet — Coin-sized</option>
        </select>
      </div>

      <div style="margin-top:20px;">
        <button type="button" class="next-step" id="step1-next">Next</button>
      </div>
    </div>

    <!-- STEP 2: FULL FLOW (Customize Your Engraving) -->
    <div class="step" id="step2">
      <h2>Step 2: Customize Your Engraving</h2>
      <label for="custom-text">Engraved Text</label>
      <input type="text" id="custom-text" class="input-field" placeholder="Enter text for engraving (optional)">

      <label for="font-select">Font (required if text entered)</label>
      <select id="font-select" name="font" class="input-field">
        <option value="">-- Select a Font --</option>
        <option value="Arial" style="font-family: Arial;">Arial</option>
        <option value="Apple Chancery" style="font-family: 'Apple Chancery', cursive;">Apple Chancery</option>
        <option value="Academy Engraved LET" style="font-family: 'Academy Engraved LET', serif;">Academy Engraved LET</option>
        <option value="American Typewriter" style="font-family: 'American Typewriter', serif;">American Typewriter</option>
        <option value="Apple Symbols" style="font-family: 'Apple Symbols';">Apple Symbols</option>
        <option value="Charmonman" style="font-family: 'Charmonman', cursive;">Charmonman</option>
        <option value="Times New Roman" style="font-family: 'Times New Roman', serif;">Times New Roman</option>
        <option value="Source Code Pro" style="font-family: 'Source Code Pro', monospace;">Source Code Pro</option>
      </select>

      <label for="text-location">Text Placement (only necessary if you entered text)</label>
      <input type="text" id="text-location" class="input-field" placeholder="Describe where the text should be placed">

      <label for="upload-file">Upload Design or Image (optional)</label>
      <div style="display:flex; gap:8px; align-items:center;">
        <input type="file" id="upload-file" accept="image/*" class="input-field" style="flex:1;">
        <button type="button" id="delete-file" style="background:#d9534f;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;">Delete</button>
      </div>
      <p style="font-size: 0.9em; color: #555; margin-top: 5px;">
        Please upload a file only if you want a design or image.<br>
        Designs should be clear black-and-white line art.<br>
        Images should be simple, with a clear, distinct subject.
      </p>

      <label for="file-placement">File Placement (only necessary if you uploaded a file)</label>
      <input type="text" id="file-placement" class="input-field" placeholder="Describe how the design/image should be placed">

      <label for="additional-desc">Additional Description</label>
      <textarea id="additional-desc" class="input-field" rows="3" placeholder="Any other details about your design?"></textarea>

      <div class="buttons">
        <button class="prev-step" data-prev="step1">Back</button>
        <button class="next-step" data-next="step3">Next</button>
      </div>
    </div>

    <!-- STEP 2 CUSTOMIZE: short flow for customizing existing product -->
    <div class="step" id="step2_custom">
      <h2>Step 2: Describe Changes</h2>
      <p class="step-desc">Tell us what you'd like changed from the selected product, and upload a design if needed.</p>

      <p><strong>Selected product:</strong> <span id="selected-product-text">None</span></p>

      <label for="custom-changes">Requested changes / notes</label>
      <textarea id="custom-changes" class="input-field" rows="4" placeholder="Describe the changes (text edits, size, placement, etc.)"></textarea>

      <label for="upload-file-custom">Upload Design or Image (optional)</label>
      <div style="display:flex; gap:8px; align-items:center;">
        <input type="file" id="upload-file-custom" accept="image/*" class="input-field" style="flex:1;">
        <button type="button" id="delete-file-custom" style="background:#d9534f;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;">Delete</button>
      </div>

      <label for="file-placement-custom">File Placement (optional)</label>
      <input type="text" id="file-placement-custom" class="input-field" placeholder="Describe how the design/image should be placed">

      <div class="buttons">
        <button type="button" class="prev-step" data-prev="step1">Back</button>
        <button type="button" class="next-step" data-next="step3_custom">Next</button>
      </div>
    </div>

    <!-- STEP 3: FULL FLOW review -->
    <div class="step" id="step3">
      <h2>Step 3: Review & Add to Cart</h2>
      <p class="step-desc">Check your selections below before adding to cart.</p>
      <div id="summary" style="text-align:left;"></div>
      <p id="total-price">Total: $0.00</p>

      <div class="verify-section" style="margin-top:20px; text-align:left;">
        <label for="verify-name">Your Full Name</label>
        <input type="text" id="verify-name" class="input-field" placeholder="Enter your full name" required>

        <label for="verify-email">Your Email</label>
        <input type="email" id="verify-email" class="input-field" placeholder="Enter your email" required>
      </div>
      <button type="button" class="prev-step" data-prev="step2">Back</button>
      <button type="button" id="add-to-cart">Add to Cart</button>
    </div>

    <!-- STEP 3 CUSTOM: customize review -->
    <div class="step" id="step3_custom">
      <h2>Step 3: Review & Add to Cart</h2>
      <p class="step-desc">Confirm your customizations and add to cart.</p>
      <div id="summary_custom" style="text-align:left;"></div>
      <p id="total-price-custom">Total: $0.00</p>

      <div class="verify-section" style="margin-top:20px; text-align:left;">
        <label for="verify-name-custom">Your Full Name</label>
        <input type="text" id="verify-name-custom" class="input-field" placeholder="Enter your full name" required>

        <label for="verify-email-custom">Your Email</label>
        <input type="email" id="verify-email-custom" class="input-field" placeholder="Enter your email" required>
      </div>
      <button type="button" class="prev-step" data-prev="step2_custom">Back</button>
      <button type="button" id="add-to-cart-custom">Add to Cart</button>
    </div>

  </div>
</main>

<!-- Hidden iframe for form submission -->
<iframe name="submit-frame" style="display:none;"></iframe>

<!-- Hidden form (populated and submitted to FormBackend silently) -->
<form id="sendForm" style="display:none;"
      method="POST"
      action="https://www.formbackend.com/f/8a1738ba071ca12a"
      enctype="multipart/form-data"
      target="submit-frame">
  <input type="hidden" name="subject" value="New Custom Order from Mozart Laser">
  <input type="hidden" name="from_name" value="MozartLaser.com">

  <!-- Generic fields -->
  <input type="hidden" name="flow_type" id="f-flow-type">
  <input type="hidden" name="product" id="f-product">
  <input type="hidden" name="shape" id="f-shape">

  <!-- Full flow fields -->
  <input type="hidden" name="engraved_text" id="f-text">
  <input type="hidden" name="font" id="f-font">
  <input type="hidden" name="text_location" id="f-location">
  <input type="hidden" name="file_placement" id="f-file-placement">
  <input type="hidden" name="additional_description" id="f-description">

  <!-- Customize-flow fields -->
  <input type="hidden" name="selected_product" id="f-selected-product">
  <input type="hidden" name="custom_changes" id="f-custom-changes">
  <input type="hidden" name="custom_file_placement" id="f-custom-file-placement">

  <!-- file input must be present for file submissions -->
  <input type="file" name="design_file" id="f-design" style="display:none;">

  <!-- other metadata -->
  <input type="hidden" name="total_price" id="f-price">
  <input type="hidden" name="replyto" id="f-email">
</form>

<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="social-links">
      <a href="https://facebook.com" target="_blank" aria-label="Facebook"><img src="images/facebook-icon.png" alt="Facebook"></a>
      <a href="https://instagram.com" target="_blank" aria-label="Instagram"><img src="images/instagram-icon.png" alt="Instagram"></a>
      <a href="https://x.com" target="_blank" aria-label="X"><img src="images/X-icon.png" alt="X"></a>
    </div>
    <p>&copy; 2025 Mozart Laser. All rights reserved.</p>
  </div>
</footer>

<!-- SCRIPTS -->
<script src="js/navbar.js"></script>
<script src="js/cart.js"></script>
<script src="js/create.js"></script>
</body>
</html>